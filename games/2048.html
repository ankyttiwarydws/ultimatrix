<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2048 Game - Play Online Free | Ultimatrix</title>
  <meta name="description" content="Play the classic 2048 game online for free on Ultimatrix! Merge tiles, increase your score, and challenge your brain. Use arrow keys to move. No download needed." />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #ece9e6, #ffffff);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .game-container {
      text-align: center;
      background-color: #faf8ef;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      max-width: 500px;
      width: 100%;
      position: relative;
    }
    .title {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 10px;
      color: #776e65;
    }
    .score-board {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .score-box {
      background-color: #bbada0;
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
    }
    .side-buttons {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      justify-content: space-between;
      width: 100%;
      padding: 0 30px;
      z-index: 10;
      pointer-events: none;
    }
    .side-buttons a {
      background-color: rgba(255, 255, 255, 0.9);
      color: #333;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 0.9rem;
      border: 1px solid #ccc;
      pointer-events: all;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      grid-template-rows: repeat(4, 100px);
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .tile {
      width: 100px;
      height: 100px;
      background-color: #cdc1b4;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.8rem;
      border-radius: 8px;
      color: #776e65;
    }
    .controls {
      margin-top: 10px;
    }
    .controls button {
      margin: 5px;
      padding: 10px 15px;
      border: none;
      background-color: #8f7a66;
      color: white;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
    }
    .controls button:hover {
      background-color: #776e65;
    }
    .instructions {
      margin-top: 20px;
      font-size: 0.9rem;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="side-buttons">
    <a href="/ultimatrix/index.html">‚¨Ö Back to Ultimatrix</a>
    <a href="/more-games">Explore Other Games ‚û°</a>
  </div>
  <div class="game-container" tabindex="0" onkeydown="handleKey(event)">
    <div class="title">2048</div>
    <div class="score-board">
      <div class="score-box">Score: <span id="score">0</span></div>
      <div class="score-box">Best: <span id="best">0</span></div>
    </div>
    <div class="grid" id="grid"></div>
    <div class="controls">
      <button onclick="startGame()">üîÅ Restart</button>
    </div>
    <div class="instructions">
      Use arrow keys (‚Üë ‚Üì ‚Üê ‚Üí) on your keyboard to move the tiles. Merge matching tiles to reach 2048!
    </div>
  </div>
  <script>
    const gridElement = document.getElementById("grid");
    const scoreElement = document.getElementById("score");
    const bestElement = document.getElementById("best");
    let grid = [], score = 0, best = localStorage.getItem("best2048") || 0;

    bestElement.textContent = best;

    function createTile(value = 0) {
      const tile = document.createElement("div");
      tile.className = "tile";
      tile.textContent = value > 0 ? value : "";
      return tile;
    }

    function drawGrid() {
      while (gridElement.firstChild) gridElement.removeChild(gridElement.firstChild);
      for (let i = 0; i < 4; i++) {
        for (let j = 0; j < 4; j++) {
          const tile = createTile(grid[i][j]);
          gridElement.appendChild(tile);
        }
      }
      scoreElement.textContent = score;
      if (score > best) {
        best = score;
        bestElement.textContent = best;
        localStorage.setItem("best2048", best);
      }
    }

    function startGame() {
      grid = Array.from({ length: 4 }, () => Array(4).fill(0));
      score = 0;
      addRandomTile();
      addRandomTile();
      drawGrid();
    }

    function addRandomTile() {
      const empty = [];
      for (let i = 0; i < 4; i++) {
        for (let j = 0; j < 4; j++) {
          if (grid[i][j] === 0) empty.push([i, j]);
        }
      }
      if (empty.length === 0) return;
      const [r, c] = empty[Math.floor(Math.random() * empty.length)];
      grid[r][c] = Math.random() < 0.9 ? 2 : 4;
    }

    function move(dir) {
      const rotated = rotateGrid(grid, dir);
      let moved = false;
      for (let row of rotated) {
        const filtered = row.filter(v => v);
        const merged = [];
        for (let i = 0; i < filtered.length; i++) {
          if (filtered[i] === filtered[i+1]) {
            const mergedVal = filtered[i]*2;
            merged.push(mergedVal);
            score += mergedVal;
            i++;
            moved = true;
          } else {
            merged.push(filtered[i]);
            if (i > 0 && filtered[i] !== row[i]) moved = true;
          }
        }
        while (merged.length < 4) merged.push(0);
        row.splice(0, 4, ...merged);
      }
      grid = rotateGrid(rotated, reverseDir(dir));
      if (moved) addRandomTile();
      drawGrid();
    }

    function rotateGrid(g, dir) {
      const newGrid = Array.from({ length: 4 }, () => Array(4).fill(0));
      for (let r = 0; r < 4; r++) {
        for (let c = 0; c < 4; c++) {
          if (dir === "left") newGrid[r][c] = g[r][c];
          else if (dir === "right") newGrid[r][c] = g[r][3 - c];
          else if (dir === "up") newGrid[r][c] = g[c][r];
          else if (dir === "down") newGrid[r][c] = g[3 - c][r];
        }
      }
      return newGrid;
    }

    function reverseDir(dir) {
      if (dir === "up") return "down";
      if (dir === "down") return "up";
      if (dir === "left") return "left";
      if (dir === "right") return "right";
    }

    function handleKey(e) {
      switch (e.key) {
        case "ArrowUp": move("up"); break;
        case "ArrowDown": move("down"); break;
        case "ArrowLeft": move("left"); break;
        case "ArrowRight": move("right"); break;
      }
    }

    startGame();
    document.querySelector('.game-container').focus();
  </script>
</body>
</html>
